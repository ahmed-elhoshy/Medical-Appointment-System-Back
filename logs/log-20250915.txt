2025-09-15 12:17:44.958 +03:00 [INF] Background reminder service started
2025-09-15 12:33:23.652 +03:00 [INF] Background reminder service started
2025-09-15 12:51:56.971 +03:00 [INF] Background reminder service started
2025-09-15 12:52:04.515 +03:00 [INF] New doctor registered with ID: 1
2025-09-15 12:52:22.101 +03:00 [INF] Doctor logged in with email: elhoushyahmedd@gmail.com
2025-09-15 12:52:58.666 +03:00 [INF] Doctor logged in with email: elhoushyahmedd@gmail.com
2025-09-15 12:54:53.734 +03:00 [INF] Doctor logged in with email: elhoushyahmedd@gmail.com
2025-09-15 12:59:23.763 +03:00 [INF] Doctor logged in with email: elhoushyahmedd@gmail.com
2025-09-15 12:59:37.381 +03:00 [INF] Doctor logged in with email: elhoushyahmedd@gmail.com
2025-09-15 12:59:42.219 +03:00 [INF] Doctor logged in with email: elhoushyahmedd@gmail.com
2025-09-15 13:00:05.793 +03:00 [INF] Doctor logged in with email: elhoushyahmedd@gmail.com
2025-09-15 13:01:53.704 +03:00 [INF] New patient registered with ID: 1
2025-09-15 13:01:56.600 +03:00 [INF] Patient logged in with email: elhoushyahmedd@gmail.com
2025-09-15 13:02:49.717 +03:00 [INF] Doctor logged in with email: elhoushyahmedd@gmail.com
2025-09-15 13:05:12.423 +03:00 [INF] Doctor logged in with email: elhoushyahmedd@gmail.com
2025-09-15 13:06:05.856 +03:00 [INF] Doctor logged in with email: elhoushyahmedd@gmail.com
2025-09-15 13:06:40.208 +03:00 [INF] New doctor registered with ID: 2
2025-09-15 13:07:00.347 +03:00 [INF] Doctor logged in with email: user@example.com
2025-09-15 13:07:34.449 +03:00 [INF] Doctor logged in with email: user@example.com
2025-09-15 13:15:46.569 +03:00 [INF] Background reminder service started
2025-09-15 13:16:20.370 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'RamyroTask.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Doctors' with unique index 'IX_Doctors_Email'. The duplicate key value is (user@example.com).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:50dbbfeb-3e4e-4173-90dc-f2dc9171cfe9
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Doctors' with unique index 'IX_Doctors_Email'. The duplicate key value is (user@example.com).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:50dbbfeb-3e4e-4173-90dc-f2dc9171cfe9
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-09-15 13:16:20.558 +03:00 [ERR] Error registering doctor
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Doctors' with unique index 'IX_Doctors_Email'. The duplicate key value is (user@example.com).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:50dbbfeb-3e4e-4173-90dc-f2dc9171cfe9
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at RamyroTask.Repositories.UnitOfWork.SaveChangesAsync() in D:\kolya\iti\RamyroTask\Repositories\UnitOfWork.cs:line 26
   at RamyroTask.Services.AuthService.RegisterDoctorAsync(RegisterDoctorRequest request) in D:\kolya\iti\RamyroTask\Services\AuthService.cs:line 104
   at RamyroTask.Controllers.DoctorsController.Register(RegisterDoctorRequest request) in D:\kolya\iti\RamyroTask\Controllers\DoctorsController.cs:line 31
2025-09-15 13:29:59.022 +03:00 [INF] New doctor registered with ID: 4
2025-09-15 13:30:38.342 +03:00 [INF] Doctor logged in with email: usedr@example.com
2025-09-15 13:33:42.163 +03:00 [INF] Doctor logged in with email: usedr@example.com
2025-09-15 13:43:04.661 +03:00 [INF] Background reminder service started
2025-09-15 13:43:46.936 +03:00 [INF] Doctor logged in with email: usedr@example.com
2025-09-15 13:44:03.715 +03:00 [INF] Doctor logged in with email: usedr@example.com
2025-09-15 14:01:26.625 +03:00 [ERR] Failed executing DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Doctors] (
    [Id] uniqueidentifier NOT NULL,
    [FirstName] nvarchar(100) NOT NULL,
    [LastName] nvarchar(100) NOT NULL,
    [Specialization] nvarchar(200) NOT NULL,
    [Email] nvarchar(255) NOT NULL,
    [PhoneNumber] nvarchar(20) NOT NULL,
    [PasswordHash] nvarchar(max) NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_Doctors] PRIMARY KEY ([Id])
);
2025-09-15 14:53:45.148 +03:00 [INF] Background reminder service started
2025-09-15 14:54:37.411 +03:00 [INF] New doctor registered with ID: "9c058af9-f44b-448d-93a3-ae13a1e5d8a3"
2025-09-15 14:54:47.389 +03:00 [INF] Doctor logged in with email: user@example.com
2025-09-15 14:56:29.632 +03:00 [INF] New patient registered with ID: "3b9a23cb-741d-4110-8f4b-35f29d16fd91"
2025-09-15 14:56:35.148 +03:00 [INF] Patient logged in with email: user@example.com
2025-09-15 15:07:22.101 +03:00 [INF] New appointment created with ID: "6f8f6f45-53ef-477c-f5ef-08ddf4506d0c"
2025-09-15 15:27:07.098 +03:00 [INF] Patient logged in with email: user@example.com
2025-09-15 16:14:52.187 +03:00 [INF] Patient logged in with email: user@example.com
2025-09-15 16:15:50.611 +03:00 [INF] Patient logged in with email: user@example.com
2025-09-15 16:16:30.157 +03:00 [INF] Processed 0 upcoming appointments for reminders
2025-09-15 16:17:54.034 +03:00 [INF] Patient logged in with email: user@example.com
2025-09-15 16:21:59.962 +03:00 [INF] Patient logged in with email: user@example.com
2025-09-15 16:24:07.835 +03:00 [INF] Patient logged in with email: user@example.com
2025-09-15 16:26:25.183 +03:00 [INF] Patient logged in with email: user@example.com
2025-09-15 16:26:44.857 +03:00 [INF] Patient updated with ID: "3b9a23cb-741d-4110-8f4b-35f29d16fd91"
2025-09-15 16:26:53.009 +03:00 [INF] Patient updated with ID: "3b9a23cb-741d-4110-8f4b-35f29d16fd91"
2025-09-15 16:28:00.738 +03:00 [INF] New doctor registered with ID: "ce970ffb-8840-4cd3-b316-8ee4ab1789d9"
2025-09-15 16:28:06.513 +03:00 [INF] Doctor logged in with email: user@examplew.com
2025-09-15 16:28:35.740 +03:00 [INF] New patient registered with ID: "91c83dbc-7497-4710-a97d-d973833a15e8"
2025-09-15 16:28:38.855 +03:00 [INF] Patient logged in with email: user@examplew.com
2025-09-15 16:42:34.223 +03:00 [INF] Patient logged in with email: user@examplew.com
2025-09-15 16:43:07.025 +03:00 [INF] Patient logged in with email: user@examplew.com
2025-09-15 16:43:09.277 +03:00 [INF] Patient logged in with email: user@examplew.com
2025-09-15 16:43:14.675 +03:00 [INF] Patient logged in with email: user@examplew.com
2025-09-15 16:43:18.345 +03:00 [INF] Patient logged in with email: user@examplew.com
